{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block title %}Edit Order{% endblock %}

{% block content %}
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css" rel="stylesheet">

<style>
    .custom-input {
        width: 100%;
        padding: 8px;
        margin: 5px 0;
        box-sizing: border-box;
        border: 1px solid #ccc;
        border-radius: 4px;
    }
    .custom-label {
        font-weight: bold;
        display: block;
        margin-bottom: 5px;
    }
    .form-group {
        margin-bottom: 15px;
    }
    .back-btn {
        display: block;
        margin-top: 20px;
        padding: 10px 20px;
        background-color: #6c757d;
        color: white;
        border-radius: 5px;
        text-decoration: none;
        text-align: center;
        transition: background-color 0.3s ease;
    }
    .back-btn:hover {
        background-color: #5a6268;
    }
</style>

<div class="row justify-content-center">
    <div class="col-lg-10">
        <div class="card shadow-lg border-0 rounded-lg">
            <div class="card-header bg-dark text-white">
                <h3 class="text-center font-weight-light my-4">Edit Order</h3>
            </div>
            <div class="card-body">
                <form method="POST">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="{{ order_form.wrapping_paper.id_for_label }}" class="form-label"><i class="fas fa-box"></i> {{ order_form.wrapping_paper.label }}</label>
                        {{ order_form.wrapping_paper }}
                    </div>
                    <div class="form-group">
                        <label for="{{ order_form.wrapping_paper_qty.id_for_label }}" class="form-label"><i class="fas fa-box-open"></i> {{ order_form.wrapping_paper_qty.label }}</label>
                        {{ order_form.wrapping_paper_qty }}
                    </div>
                    <hr>
                    <div>
                        {{ formset.management_form }}
                        {% for form in formset %}
                        <div class="form-group">
                            <label for="{{ form.product.id_for_label }}" class="form-label"><i class="fas fa-tag"></i> {{ form.product.label }}</label>
                            {{ form.product }}
                            {{ form.id }}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.qty.id_for_label }}" class="form-label"><i class="fas fa-sort-amount-up"></i> {{ form.qty.label }}</label>
                            {{ form.qty }}
                        </div>
                        {% endfor %}
                    </div>
                    <hr>
                    <div>
                        {{ decoration_line_formset.management_form }}
                        {% for form in decoration_line_formset %}
                        <div class="form-group">
                            <label for="{{ form.decorations.id_for_label }}" class="form-label">Decoration</label>
                            {{ form.decorations }}
                            {{ form.id }}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.dec_qty.id_for_label }}" class="form-label">Quantity</label>
                            {{ form.dec_qty }}
                        </div>
                        {% endfor %}
                    </div>
                    <div class="d-flex justify-content-between mt-3">
                        <a href="{% url 'orders' %}" class="btn btn-info">Back to orders</a>
                        <button type="submit" class="btn btn-info"><i class="bi bi-check-lg"></i> Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
